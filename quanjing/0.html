<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=yes"/>
    <title>My First Three.js Project</title>
    <style>
        body{
            padding: 0px;
            margin: 0px;
            overflow: hidden;
        }
    </style>
</head>
<body>
<div
style="position: absolute;
left:65%;
top:80%;
width: 3.7%;height: 6.7%;
visibility: hidden;
"id="quanpin"  onclick="IntoFullScreen()">
    <img src="tubiao1.png" width=100% height=100%/>
</div>

<div style="position: absolute;visibility: hidden;
left: 60%;
top:80%;
width: 3.7%;height: 6.7%;
"id="tuichu" onclick="ExitFullScreen()">
    <img src="tubiao2.png" width=100% height=100%/>
</div>

<div style="position: absolute;visibility: hidden;
left: 55%;
top: 80%;
width: 3.7%;height: 6.7%;"  id="large">
    <img src="tubiao3.png" width=100% height=100%/>
</div>

<div style="position: absolute;visibility: hidden;
left: 50%;
top: 80%;
width: 3.7%;height: 6.7%;;" id="smaller">
    <img src="tubiao4.png" width=100% height=100%/>
</div>

<div style="position: absolute;visibility: hidden;
left: 45%;
top: 80%;
width: 3.7%;height: 6.7%;" id="turnleft">
    <img src="tubiao5.png" width=100% height=100%/>
</div>

<div style="position: absolute;visibility: hidden;
left: 40%;
top: 80%;
width: 3.7%;height: 6.7%;" id="turnright">
    <img src="tubiao6.png" width=100% height=100%/>
</div>

<div style="position: absolute;visibility: hidden;
left: 35%;
top: 80%;
width: 3.7%;height: 6.7%;" id="upward">
    <img src="tubiao7.png" width=100% height=100%/>
</div>

<div style="position: absolute;visibility: hidden;
left: 30%;
top: 80%;
width: 3.7%;height: 6.7%;" id="downward">
    <img src="tubiao8.png" width=100% height=100%/>
</div>
<div
        style="position: absolute;
        width: 15%;
        height: 8%;visibility: hidden" id="load1">
    <img src="ncepu1.png" width=100% height=100%/>
    </div>
<div id="load2" style="position: absolute;top: 50%;left: 50%;color: coral">
    加载中...
</div>
<div id="device" style="position: absolute;top: 10%;left: 92%;
    width: 6%;height: 10%;visibility: hidden">
    <img src="device.png" width=100% height=100%/>
</div>
<script type="text/javascript" src="three.js"></script>
<script type="text/javascript">
    function IntoFullScreen() {
        var button=document.documentElement;
        if(button.requestFullscreen){
            button.requestFullscreen();
        }else if(button.mozRequestFullScreen){
            button.mozRequestFullScreen();
        }else if(button.webkitRequestFullScreen){
            button.webkitRequestFullScreen();
        }else if(button.msRequestFullScreen){
            button.mosRequestFullScreen();
        }
    }
    function ExitFullScreen() {
        if(document.exitFullscreen){
            document.exitFullscreen();
        }else if(document.mozCancelFullScreen){
            document.mozCancelFullScreen();
        }else if(document.webkitCancelFullScreen){
            document.webkitCancelFullScreen();
        }else if (document.msCancelFullScreen){
            document.msCancelFullScreen();
        }
    }
</script>
<script type="text/javascript">
    var camera,scene,renderer;
    var mesh;
    var lon = -90, lat = 0;
    var phi = 0, theta = 0;
    var target = new THREE.Vector3();
    var mouse=new THREE.Vector2();
    var raycaster=new THREE.Raycaster();
    var object=[];
    var large,s1,s2,s3,s4,s5,s6,smaller,turnleft,turnright,upward,downward,device,quanpin
    tuichu,load1,load2;
    var touchX,touchY,j=1;
    var sUserAgent = navigator.userAgent.toLowerCase();
    var bIsIpad = sUserAgent.match(/ipad/i) == "ipad";
    var bIsIphoneOs = sUserAgent.match(/iphone os/i) == "iphone os";
    var bIsMidp = sUserAgent.match(/midp/i) == "midp";
    var bIsUc7 = sUserAgent.match(/rv:1.2.3.4/i) == "rv:1.2.3.4";
    var bIsUc = sUserAgent.match(/ucweb/i) == "ucweb";
    var bIsAndroid = sUserAgent.match(/android/i) == "android";
    var bIsCE = sUserAgent.match(/windows ce/i) == "windows ce";
    var bIsWM = sUserAgent.match(/windows mobile/i) == "windows mobile";


    init();
    AddListener();
    animate();

    function init() {
        scene = new THREE.Scene();//创建场景

        camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 100);
        ////设置透视投影相机参数，75为可视角，window.innerWidth / window.innerHeight为视口，0.1近裁面距离，100远裁面距离

        var geometry = new THREE.CubeGeometry(100, 100, 100);//创建几何图形-盒子缓存模型（x轴上面的宽度，y轴面上的高度，z轴上的深度）

        var textures = [];
        for (var i = 0; i < 6; i++) {
            textures[i] = new THREE.Texture();
        }

        large = document.getElementById('large');
        smaller = document.getElementById('smaller');
        turnleft = document.getElementById('turnleft');
        turnright = document.getElementById('turnright');
        upward = document.getElementById('upward');
        downward = document.getElementById('downward');
         quanpin = document.getElementById('quanpin');
         tuichu = document.getElementById('tuichu');
         load1 = document.getElementById('load1');
         load2 = document.getElementById('load2');
         device=document.getElementById('device');
        var img = new Image();
        img.src = '1.jpg';
        img.onload=function () {
            var canvas, context;
            for (var i = 0; i < 6; i++) {
                canvas = document.createElement('canvas');
                context = canvas.getContext('2d');
                canvas.width = img.height;
                canvas.height = img.height;
                context.drawImage(img, img.height * i, 0, img.height, img.height, 0, 0, img.height, img.height);
                textures[i].image = canvas;
                textures[i].needsUpdate = true;
            }
            if (!(bIsIpad || bIsIphoneOs || bIsMidp || bIsUc7 || bIsUc || bIsAndroid || bIsCE || bIsWM) ) {
                large.style.visibility = 'visible';
                smaller.style.visibility = 'visible';
                turnleft.style.visibility = 'visible';
                turnright.style.visibility = 'visible';
                upward.style.visibility = 'visible';
                downward.style.visibility = 'visible';
                load1.style.visibility = 'visible';
            }else{
                large.style.visibility = 'hidden';
                smaller.style.visibility = 'hidden';
                turnleft.style.visibility = 'hidden';
                turnright.style.visibility = 'hidden';
                upward.style.visibility = 'hidden';
                downward.style.visibility = 'hidden';
                load1.style.visibility = 'hidden';
                quanpin.style.width='6%';
                quanpin.style.height='10%';
                tuichu.style.width='6%';
                tuichu.style.height='10%';
                quanpin.style.left='45%';
                tuichu.style.left='55%';
            }
            device.style.visibility='visible';
            quanpin.style.visibility = 'visible';
            tuichu.style.visibility = 'visible';
            load2.style.visibility = 'hidden';
            InitText();
            object[0].position.set(-1.2, 0.1, -1.1);
            object[1].position.set(0.2,0.02,-1.8);
            for(var i=2;i<=11;i++){
                object[i].position.set(1000,1000,1000);
            }
        }

        var material = [];
        for (var i = 0; i < 6; i++) {
            material[i] = new THREE.MeshBasicMaterial({map: textures[i]});
        }

        mesh = new THREE.Mesh(geometry, material);//构造实体，传入几何体和材质参数
        mesh.geometry.scale(1, 1, -1);//立方体图片向内翻转
        scene.add(mesh);//向场景中加入网格对象

        renderer = new THREE.WebGLRenderer({antialias:true,alpha:true});//创建渲染器
        renderer.setSize(window.innerWidth, window.innerHeight);//渲染器尺寸
        document.body.appendChild(renderer.domElement);
    }

 function AddListener(){
        document.addEventListener('mousedown',onDocumentMouseDown,false);
        document.addEventListener('wheel',onDocumentMouseWheel,false);

        document.addEventListener('touchstart',onDocumentTouchStart,false);
        document.addEventListener('touchmove',onDocumentTouchMove,false);

         if(window.DeviceMotionEvent) {
         window.addEventListener('devicemotion', onDeviceMotion, false);
         }else{alert('浏览器不支持重力遥感');}
        device.addEventListener('touchstart',ControlDeviceMotion,false);

         large.addEventListener('mousedown',DownEnlarge,true);
         smaller.addEventListener('mousedown',DownSmaller,true);
         turnleft.addEventListener('mousedown',TurnLeft,true);
         turnright.addEventListener('mousedown',TurnRight,true);
         upward.addEventListener('mousedown',UpWard,true);
        downward.addEventListener('mousedown',DownWard,true);

        window.addEventListener('resize', onWindowResize, false);
    }

    function ControlDeviceMotion() {
        event.preventDefault();
        j++;
        if(j%2==0) {
            if(window.DeviceMotionEvent) {
                window.removeEventListener('devicemotion', onDeviceMotion);
            }
        }else{
            if(window.DeviceMotionEvent) {
                window.addEventListener('devicemotion', onDeviceMotion, false);
            }else{alert('浏览器不支持重力遥感');}
        }
    }

    function onDocumentMouseDown(event) {
          mouse.x=(event.clientX/window.innerWidth)*2-1;
          mouse.y=-(event.clientY/window.innerHeight)*2+1;
          raycaster.setFromCamera(mouse,camera);
          var intersect=raycaster.intersectObjects(object);
          if(intersect.length>0){
              switch (intersect[0].object.name) {
                  case "scene1T2":
                      ChangeScene(2);
                      break;
                  case "scene1T5":
                      ChangeScene(5);
                      break;
                  case "scene2T1":
                      ChangeScene(1);
                      break;
                  case "scene2T3":
                      ChangeScene(3);
                      break;
                  case "scene3T2":
                      ChangeScene(2);
                      break;
                  case "scene3T4":
                      ChangeScene(4);
                      break;
                  case "scene4T3":
                      ChangeScene(3);
                      break;
                  case "scene5T1":
                      ChangeScene(1);
                      break;
                  case "scene4T6":
                      ChangeScene(6);
                      break;
                  case "scene6T4":
                      ChangeScene(4);
                      break;
                  case "scene6T7":
                      ChangeScene(7);
                      break;
                  case "scene7T6":
                      ChangeScene(6);
                      break;
              }
          }
          else {
              event.preventDefault();
              document.addEventListener('mousemove', onDocumentMouseMove, false);
              document.addEventListener('mouseup', onDocumentMouseUp, false);
          }
    }

    function onDocumentMouseMove(event) {
        event.preventDefault();
        var offsetX=event.movementX*0.15;
        var offsetY=event.movementY*0.15;
        lon=lon-offsetX;
        lat=lat+offsetY;
    }

    function onDocumentMouseUp(event) {
        event.preventDefault();
        document.removeEventListener('mousemove',onDocumentMouseMove);
        document.removeEventListener('mouseup',onDocumentMouseUp);
    }

    function onDocumentMouseWheel(event) {
        var speed=0.8;
        var fov=camera.fov+event.deltaY*speed;
          camera.fov=fov;
          if(camera.fov<5){
              camera.fov=5;
          }
          if(camera.fov>100){
              camera.fov=100;
          }
        camera.updateProjectionMatrix();
    }

    function onDocumentTouchStart(event) {
        event.preventDefault();
        var touch=event.touches[0];
         touchX=touch.screenX;
         touchY=touch.screenY;
    }

    function onDocumentTouchMove(event) {
        event.preventDefault();
        var touch=event.touches[0];
        lon=lon-(touch.screenX-touchX)*0.1;
        lat=lat+(touch.screenY-touchY)*0.1;
        touchX=touch.screenX;
        touchY=touch.screenY;
    }

    function onDeviceMotion(event) {//重力遥感
        var a=event.accelerationIncludingGravity;
        var x=a.x;
        var z=a.z;
        lon=lon+x*0.3;
        lat=lat-z*0.3;
    }
    
    function ChangeScene(x) {
        var texture = [];
        for (var i = 0; i < 6; i++) {
            texture[i] = new THREE.Texture();
        }
        large = document.getElementById('large');
        smaller = document.getElementById('smaller');
        turnleft = document.getElementById('turnleft');
        turnright = document.getElementById('turnright');
        upward = document.getElementById('upward');
        downward = document.getElementById('downward');
        quanpin.style.visibility = 'hidden';
        tuichu.style.visibility = 'hidden';
        large.style.visibility = 'hidden';
        smaller.style.visibility = 'hidden';
        turnleft.style.visibility = 'hidden';
        turnright.style.visibility = 'hidden';
        upward.style.visibility = 'hidden';
        downward.style.visibility = 'hidden';
        load1.style.visibility = 'hidden';
        load2.style.visibility = 'visible';
        device.style.visibility = 'hidden';
        var img = new Image();
        img.src = x + '.jpg';
        img.onload = function () {
            var canvas, context;
            for (var i = 0; i < 6; i++) {
                canvas = document.createElement('canvas');
                context = canvas.getContext('2d');
                canvas.width = img.height;
                canvas.height = img.height;
                context.drawImage(img, img.height * i, 0, img.height, img.height, 0, 0, img.height, img.height);
                texture[i].image = canvas;
                texture[i].needsUpdate = true;
            }
            if (!(bIsIpad || bIsIphoneOs || bIsMidp || bIsUc7 || bIsUc || bIsAndroid || bIsCE || bIsWM) ) {
                large.style.visibility = 'visible';
                smaller.style.visibility = 'visible';
                turnleft.style.visibility = 'visible';
                turnright.style.visibility = 'visible';
                upward.style.visibility = 'visible';
                downward.style.visibility = 'visible';
                load1.style.visibility = 'visible';
            }else{
                large.style.visibility = 'hidden';
                smaller.style.visibility = 'hidden';
                turnleft.style.visibility = 'hidden';
                turnright.style.visibility = 'hidden';
                upward.style.visibility = 'hidden';
                downward.style.visibility = 'hidden';
                load1.style.visibility = 'hidden';
                quanpin.style.width='6%';
                quanpin.style.height='10%';
                tuichu.style.width='6%';
                tuichu.style.height='10%';
                quanpin.style.left='45%';
                tuichu.style.left='55%';
            }
            device.style.visibility='visible';
            quanpin.style.visibility = 'visible';
            tuichu.style.visibility = 'visible';
            load2.style.visibility = 'hidden';
        }
        var material = mesh.material;
        for (var i = 0; i < 6; i++) {
            material[i] = new THREE.MeshBasicMaterial({map: texture[i]});
        }
        material.map.needsUpdate = true;
        switch (x) {
            case 1:
                object[0].position.set(-1.2, 0.1, -1.1);
                object[1].position.set(0.2, 0.02, -1.8);
                for (var i = 2; i <= 11; i++) {
                    object[i].position.set(1000, 1000, 1000);
                }
                break;
            case 2:
                for (var i = 0; i <= 11; i++) {
                    if (i == 2) {
                        object[i].position.set(-0.7, 0, 1.0);
                    } else if (i == 3) {
                        object[i].position.set(1.86, 0, 0.7);
                    } else {
                        object[i].position.set(1000, 1000, 1000);
                    }
                }
                break;
            case 3:
                for (var i = 0; i <= 11; i++) {
                    if (i == 4) {
                        object[i].position.set(-0.27, 0, 1.5);
                    } else if (i == 5) {
                        object[i].position.set(-0.7, 0, -1.06);
                    }
                    else {
                        object[i].position.set(1000, 1000, 1000);
                    }
                }
                break;
            case 4:
                for (var i = 0; i <= 11; i++) {
                    if (i == 6) {
                        object[i].position.set(0.5, 0, 1.1);
                    } else if (i == 8) {
                        object[i].position.set(0.1, 0, -1.7);
                    }
                    else {
                        object[i].position.set(1000, 1000, 1000);
                    }
                }
                break;
            case 5:
                for (var i = 0; i <= 11; i++) {
                    if (i == 7) {
                        object[i].position.set(0, 0, 1);
                    } else {
                        object[i].position.set(1000, 1000, 1000);
                    }
                }
                break;
            case 6:
                for (var i = 0; i <= 11; i++) {
                    if (i == 9) {
                        object[i].position.set(0.5, 0, 1.1);
                    } else if (i == 10) {
                        object[i].position.set(-0.2, 0, -1.5);
                    }
                    else {
                        object[i].position.set(1000, 1000, 1000);
                    }
                }
                break;
            case 7:
                for (var i = 0; i <= 11; i++) {
                    if (i == 11) {
                        object[i].position.set(-1.1, -0.05, 1);
                    } else {
                        object[i].position.set(1000, 1000, 1000);
                    }
                }
                break;
        }
    }

    function InitText() {
        object[0] = WriteText(1);
        object[0].name = "scene1T2";//主场景指向操场箭头
        scene.add(object[0]);
        object[1]=WriteText(2);
        object[1].name="scene1T5";//主场景指向六舍箭头
        scene.add(object[1]);
        object[2] = WriteText(3);
        object[2].name = "scene2T1";//操场指向主场面箭头
        scene.add(object[2]);
        object[3] = WriteText(4);
        object[3].name = "scene2T3";//操场指向小卖部箭头
        scene.add(object[3]);
        object[4]=WriteText(5);
        object[4].name="scene3T2";//小卖部指向操场箭头
        scene.add(object[4]);
        object[5]=WriteText(6);
        object[5].name="scene3T4";//小卖部指向十舍道路箭头
        scene.add(object[5]);
        object[6]=WriteText(7);
        object[6].name="scene4T3";//十舍道路指向小卖部箭头
        scene.add(object[6]);
        object[7]=WriteText(7);
        object[7].name="scene5T1";//六舍指向主场景箭头
        scene.add(object[7]);
        object[8]=WriteText(5);
        object[8].name="scene4T6";//十舍道路指向日新园箭头
        scene.add(object[8]);
        object[9]=WriteText(5);
        object[9].name="scene6T4";//日新园指向十舍道路箭头
        scene.add(object[9]);
        object[10]=WriteText(4);
        object[10].name="scene6T7";//日新园指向小操场箭头
        scene.add(object[10]);
        object[11]=WriteText(8);
        object[11].name="scene7T6";//小操场指向日新园箭头
        scene.add(object[11]);
    }

    function WriteText(a) {
        var canvas = document.createElement('canvas');
        var context = canvas.getContext('2d');
        canvas.width = 50;
        canvas.height = 50;
        switch (a) {
            case 1:
                context.beginPath();
                context.moveTo(0, 25);
                context.lineTo(25, 5);
                context.lineTo(25, 20);
                context.lineTo(50, 20);
                context.lineTo(50, 30);
                context.lineTo(25, 30);
                context.lineTo(25, 45);
                context.lineTo(0, 25);
                context.fillStyle = "#007FFF";
                context.fill();
                context.stroke();
                context.closePath();
                break;
            case 2:
            case 3:
            case 6:
                context.beginPath();
                context.moveTo(25, 0);
                context.lineTo(45, 20);
                context.lineTo(30, 20);
                context.lineTo(30, 50);
                context.lineTo(20, 50);
                context.lineTo(20, 20);
                context.lineTo(5, 20);
                context.lineTo(25, 0);
                context.fillStyle = "#007FFF";
                context.fill();
                context.stroke();
                context.closePath();
                break;
            case 4:
                context.translate(20,-7.6);
                context.rotate(0.2*Math.PI);
                context.beginPath();
                context.moveTo(25, 0);
                context.lineTo(45, 20);
                context.lineTo(30, 20);
                context.lineTo(30, 50);
                context.lineTo(20, 50);
                context.lineTo(20, 20);
                context.lineTo(5, 20);
                context.lineTo(25, 0);
                context.fillStyle = "#007FFF";
                context.fill();
                context.stroke();
                context.closePath();
                break;
            case 5:
                context.translate(-5,15);
                context.rotate(-0.2*Math.PI);
                context.beginPath();
                context.moveTo(25, 0);
                context.lineTo(45, 20);
                context.lineTo(30, 20);
                context.lineTo(30, 50);
                context.lineTo(20, 50);
                context.lineTo(20, 20);
                context.lineTo(5, 20);
                context.lineTo(25, 0);
                context.fillStyle = "#007FFF";
                context.fill();
                context.stroke();
                context.closePath();
                break;
            case 7:
                context.translate(35,-7.6);
                context.rotate(0.3*Math.PI);
                context.beginPath();
                context.moveTo(25, 0);
                context.lineTo(45, 20);
                context.lineTo(30, 20);
                context.lineTo(30, 50);
                context.lineTo(20, 50);
                context.lineTo(20, 20);
                context.lineTo(5, 20);
                context.lineTo(25, 0);
                context.fillStyle = "#007FFF";
                context.fill();
                context.stroke();
                context.closePath();
                break;
            case 8:
                context.translate(0.19,44);
                context.rotate(-0.5*Math.PI);
                context.beginPath();
                context.moveTo(25, 0);
                context.lineTo(45, 20);
                context.lineTo(30, 20);
                context.lineTo(30, 50);
                context.lineTo(20, 50);
                context.lineTo(20, 20);
                context.lineTo(5, 20);
                context.lineTo(25, 0);
                context.fillStyle = "#007FFF";
                context.fill();
                context.stroke();
                context.closePath();
                break;
            default:break;
        }
        var texture=new THREE.Texture(canvas);
        texture.needsUpdate=true;
        var material=new THREE.SpriteMaterial({map:texture});
        var mesh1=new THREE.Sprite(material);
        mesh1.scale.set(0.15,0.15,0.15);
        return mesh1;
    }

    function DownEnlarge() {
        var time1=1;
        s1= window.setInterval(function () {
             var speed=0.01;
             var fov=camera.fov-speed*(time1++);
             camera.fov=fov;
             if(camera.fov<5){
                 camera.fov=5;
             }
             camera.updateProjectionMatrix();
         },0);
         large.addEventListener('mouseup',Up,true);
    }

    function Up() {
        clearInterval(s1);
        event.preventDefault();
        large.removeEventListener('mousedown',DownEnlarge);
        large.removeEventListener('mouseup',Up);
    }

    function DownSmaller() {
        var time1 = 1;
        s2 = window.setInterval(function () {
            var speed = 0.01;
            var fov = camera.fov + speed * (time1++);
            camera.fov = fov;
            if (camera.fov > 100) {
                camera.fov = 100;
            }
            camera.updateProjectionMatrix();
        }, 0);
        smaller.addEventListener('mouseup', Up1, true);
    }

    function Up1() {
        clearInterval(s2);
        event.preventDefault();
        smaller.removeEventListener('mousedown',DownSmaller);
        smaller.removeEventListener('mouseup',Up1);
    }

    function TurnLeft() {
        s3=window.setInterval(function () {
            lon=lon-3;
        },0);
        turnleft.addEventListener('mouseup',Up2,true);
    }

    function Up2() {
        clearInterval(s3);
        event.preventDefault();
        turnleft.removeEventListener('mousedown',TurnLeft);
        turnleft.removeEventListener('mouseup',Up2);
    }

    function TurnRight() {
        s4=window.setInterval(function () {
            lon=lon+3;
        },0);
        turnright.addEventListener('mouseup',Up3,true);
    }

    function Up3() {
        clearInterval(s4);
        event.preventDefault();
        turnright.removeEventListener('mousedown',TurnRight);
        turnright.removeEventListener('mouseup',Up3);
    }

    function UpWard() {
        s5=window.setInterval(function () {
            lat=lat+3;
        },0);
        upward.addEventListener('mouseup',Up4,true);
    }

    function Up4() {
        clearInterval(s5);
        event.preventDefault();
        upward.removeEventListener('mousedown',UpWard);
        upward.removeEventListener('mouseup',Up4);;
    }

    function DownWard() {
        s6=window.setInterval(function () {
            lat=lat-3;
        },0);
        downward.addEventListener('mouseup',Up5,true);
    }

    function Up5() {
        clearInterval(s6);
        event.preventDefault();
        downward.removeEventListener('mousedown',DownWard);
        downward.removeEventListener('mouseup',Up5);
    }
    
    function onWindowResize() {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
    }

    function animate() {
        requestAnimationFrame(animate);//动画
        if(lat>88){
            lat=88;
        }
        if(lat<-88){
            lat=-88;
        }
        phi=(90-lat)*(Math.PI/180);
        theta=lon*(Math.PI/180);
        target.x=Math.cos(theta)*Math.sin(phi);
        target.y=Math.cos(phi);
        target.z=Math.sin(phi)*Math.sin(theta);
        camera.lookAt(target);
        renderer.render(scene,camera);//结合场景和相机进行渲染
    }
</script>
</body>
</html>